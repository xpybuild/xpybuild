<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>targets.copy.FileContentsMapper</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >xpybuild v1.15</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="targets-module.html">Package&nbsp;targets</a> ::
        <a href="targets.copy-module.html">Module&nbsp;copy</a> ::
        Class&nbsp;FileContentsMapper
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="targets.copy.FileContentsMapper-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class FileContentsMapper</h1><p class="nomargin-top"><span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper">source&nbsp;code</a></span></p>
<pre class="base-tree">
object --+
         |
        <strong class="uidshort">FileContentsMapper</strong>
</pre>

<dl><dt>Known Subclasses:</dt>
<dd>
      <ul class="subclass-list">
<li><a href="targets.copy.AddFileFooter-class.html">AddFileFooter</a></li><li>, <a href="targets.copy.AddFileHeader-class.html">AddFileHeader</a></li><li>, <a href="targets.copy.InsertFileContentsLineMapper-class.html">InsertFileContentsLineMapper</a></li><li>, <a href="targets.copy.OmitLines-class.html">OmitLines</a></li><li>, <a href="targets.copy.RegexLineMapper-class.html">RegexLineMapper</a></li><li>, <a href="targets.copy.StringReplaceLineMapper-class.html">StringReplaceLineMapper</a></li>  </ul>
</dd></dl>

<hr />
<p>A base class for mappers that take part in text file transformation 
  for use with FilteredCopy</p>
  <p>Note that files are read and written in binary mode, so mappers will 
  be dealing directly with platform-specific \n and \r characters; python's
  os.linesep should be used where a platform-netural new line character is 
  required.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Instance Methods</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="targets.copy.FileContentsMapper-class.html#getInstance" class="summary-sig-name">getInstance</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Called when a target begins to use a (potentially shared) line 
      mapper.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.getInstance">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="prepare"></a><span class="summary-sig-name">prepare</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">context</span>,
        <span class="summary-sig-arg">**kwargs</span>)</span><br />
      Called once the build process has started and before any other method
      on this mapper (other than getInstance) to allow the mapper to 
      initialize its internal variables using the build context, for 
      example by expanding build properties.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.prepare">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="targets.copy.FileContentsMapper-class.html#startFile" class="summary-sig-name">startFile</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">context</span>,
        <span class="summary-sig-arg">src</span>,
        <span class="summary-sig-arg">dest</span>)</span><br />
      Called when the mapper starts to process a new file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.startFile">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="targets.copy.FileContentsMapper-class.html#mapLine" class="summary-sig-name">mapLine</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">context</span>,
        <span class="summary-sig-arg">line</span>)</span><br />
      Called for every line in the file, returning the original line, a 
      changed line, or None if the line should be deleted.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.mapLine">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="targets.copy.FileContentsMapper-class.html#getHeader" class="summary-sig-name">getHeader</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">context</span>)</span><br />
      Called at the start of every file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.getHeader">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="targets.copy.FileContentsMapper-class.html#getFooter" class="summary-sig-name">getFooter</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">context</span>)</span><br />
      Called at the end of every file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.getFooter">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="getDescription"></a><span class="summary-sig-name">getDescription</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">context</span>)</span><br />
      Returns a string description of the transformation, to be used for 
      up-to-date rebuild checking</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.getDescription">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="targets.copy.FileContentsMapper-class.html#getDependencies" class="summary-sig-name">getDependencies</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Advanced option for specifying paths that are required to be read by 
      this line mapper, which therefore should be dependencies of the 
      target that uses it.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.getDependencies">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__init__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Properties</span></td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Method Details</span></td>
</tr>
</table>
<a name="getInstance"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getInstance</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.getInstance">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Called when a target begins to use a (potentially shared) line mapper.
  Returns the thread-safe (or stateless) FileContentsMapper instance that 
  will be used; since most instances are inherently stateless, by default 
  just returns self.</p>
  <p>If you need to keep any state that changes after the <a 
  href="targets.copy.FileContentsMapper-class.html#prepare" 
  class="link">prepare</a> method is called (for example based on tracking 
  the current filename or previously encountered lines), you need to 
  override this and return a new instance either by calling your 
  constructor or use Python's copy.deepcopy() method.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="startFile"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">startFile</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">context</span>,
        <span class="sig-arg">src</span>,
        <span class="sig-arg">dest</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.startFile">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Called when the mapper starts to process a new file.</p>
  <p>Can be used to prevent the mapper handling certain files. For stateful
  mappers (with an implementation of L(getInstance), this can be used to 
  enable file-specific behaviour during mapping.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>context</code></strong> - The context.</li>
        <li><strong class="pname"><code>src</code></strong> - The absolute normalized long-path-safe source file path.</li>
        <li><strong class="pname"><code>dest</code></strong> - The absolute normalized long-path-safe destination file path.</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>True if this file can be handled by this mapper, or False if it 
          should be ignored for this file.</dd>
  </dl>
</td></tr></table>
</div>
<a name="mapLine"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">mapLine</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">context</span>,
        <span class="sig-arg">line</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.mapLine">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Called for every line in the file, returning the original line, a 
  changed line, or None if the line should be deleted.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>line</code></strong> - The input line as a byte string.</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>The line to write to output as a byte string, or None if it 
          should be omitted.</dd>
  </dl>
</td></tr></table>
</div>
<a name="getHeader"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getHeader</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">context</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.getHeader">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Called at the start of every file. By default returns None but can 
  return a string that will be written to the target file before anything 
  else. Use os.linesep for new lines.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="getFooter"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getFooter</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">context</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.getFooter">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Called at the end of every file. By default returns None but can 
  return a string that will be written to the target file after everything 
  else. Use os.linesep for new lines.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="getDependencies"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getDependencies</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="targets.copy-pysrc.html#FileContentsMapper.getDependencies">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Advanced option for specifying paths that are required to be read by 
  this line mapper, which therefore should be dependencies of the target 
  that uses it. Returns a list of unresolved paths.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >xpybuild v1.15</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Sat Jul 20 13:40:17 2019
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
